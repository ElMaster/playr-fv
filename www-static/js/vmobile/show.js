$(function(){var D=$("#createPlaylistForm"),g=$("#createPlaylistWrapper");$playlistModal=$("#playlistModal"),$rateWrapper=$("#rateWrapper"),windowLocation=window.location,videoRated=JSON.parse(decodeURIComponent($.cookie("videoRated"))),d;if(ua.match(/TansoDL/i)){$("#js-toggleWrap").remove();$(".videoSource").attr("src",$("#videoShow").data("default"))}else{var l=(varObj.isVr)?"Player2160pUpsell":"Player1080pUpsell",A=(varObj.isPremium)?"":l,d=Object.create(QualitySelector).init(window["qualityItems_"+varObj.videoId],"js-buildList",varObj.segment,A)}if($("#videoShow").data("ispremium")===0){var k=parseInt(getCookieAdvanced("views"));if(!k){k=5}if(parseInt(k)>=6&&windowLocation.href.indexOf("utm_source=PBWeb")==-1&&windowLocation.href.indexOf("utm_campaign=PBWeb")==-1){setCookieAdvanced("views",1);windowLocation.href=varObj.interUrl}else{setCookieAdvanced("views",parseInt(k+1))}}$("#thumbsBtn, .js-closeThumb ").click(function(){$("#thumbDisplay, #thumbsBtn, .js-closeThumb").toggleClass("active")});if(videoRated&&videoRated[varObj.videoId]){t(m(videoRated[varObj.videoId]).value)}$("#thumbs-up, #thumbs-down").on("click",v);function v(F){var E=$(this);if(E.hasClass("voted")){return}var G=E.attr("id")==="thumbs-up"?1:0;t(G);$.ajax({url:varObj.voteUrl+"&current="+(G?varObj.currentUp:varObj.currentDown)+"&value="+G,type:"POST"})}function t(G){G=parseInt(G);var F=[$("#thumbs-down"),$("#thumbs-up")];if(!F[G]){return}var H=F[G?0:1].hasClass("voted");var E=F[G].addClass("voted").find("span");E.html(u(parseInt(G?varObj.currentUp:varObj.currentDown)+1));var I=F[G?0:1].removeClass("voted").find("span");if(H){I.html(u(parseInt(G?varObj.currentDown:varObj.currentUp)))}}function u(F){if(F>1000){var E=Math.round(F/1000);if(E){return E+"k"}else{return F}}return F}function m(E){E=E.split("|");return{value:E[0],current:E[1]}}if(varObj.liu&&!varObj.deleted){if(varObj.isFavourite){$(document).find("#favoriteBtn").addClass("active")}else{$(document).find("#favoriteBtn").removeClass("active")}$(document).on("click","#favoriteBtn",function(){var E=$(this);$.post("video/favourite",{id:varObj.videoId,fav_key:varObj.videoKey,fav_hash:varObj.videoHash,toggle:(varObj.isFavourite?0:1)},function(G){if(G){var F=JSON.parse(G);isFavouriteFromJson=F.action=="remove"?0:1;if(F.success=="false"){yesNoModal.show(F.message)}else{if(isFavouriteFromJson){E.removeClass("active");varObj.isFavourite=0}else{E.addClass("active");varObj.isFavourite=1}}}else{E.addClass("active")}})})}else{if(!varObj.liu){$("document").on("click","#favoriteBtn",function(){windowLocation.href="login"})}}$("#downloadTansoDl").on("click",function(F){var E=ua.match(/TansoDL/i);if(navigator.userAgent.match(/Windows Phone/i)||isAndroid&&androidVersion<3){return}else{if(E==null&&isAndroid||E==null&&ua.match(/iPhone/i)){F.preventDefault();if(ua.match(/iPhone/i)){window.open("http://m.mirmay.com/downloadmanager?utm_source=phmt&utm_medium=downloadbutton&utm_campaign=inplayer_button")}else{windowLocation.href="http://m.mirmay.com/downloadmanager?utm_source=phmt&utm_medium=downloadbutton&utm_campaign=inplayer_button"}}}});$("#downloadTrigger, .closeBtn, .dismissButton").click(function(){$("#downloadTrigger").find("i").toggleClass("active");$(".downloadBar").toggle();$(".js-confirmationInitialFreeAccount").hide();$(".js-InitialFreeAccount").show()});function r(E){var G=window.location.search.substring(1);var I=G.split("&");var F=0;var H=I.length;for(F;F<H;F++){var J=I[F].split("=");if(J[0]==E){return J[1]}}return(false)}if(r("activated_download")==1){$("#upgradeSuccessMessage").show();$(".downloadBar").show();$("#downloadMessage").hide();$("#downloadTrigger").find("i").toggleClass("active")}else{$("#upgradeSuccessMessage").hide();$("#downloadMessage").show()}$(".confirmationButton").on("click",function(){$(".js-InitialFreeAccount").hide();$(".js-confirmationInitialFreeAccount").show()});$(".downloadNowButton").on("click",function(){$("#upgradeSuccessMessage").hide();$("#downloadMessage").show()});var a=document.getElementById("createPlaylistWrapper");if(a){var B=new MG_Modal({content:a,className:"playlistItemContainer playlistVideo"})}if(varObj.liu&&!varObj.deleted){$playlistModal.on("click",function(){if(typeof B!=="undefined"){B.openModal()}D.find("button[type=submit]").attr("disabled",false)})}else{$playlistModal.on("click",function(){windowLocation.href="login"})}var o=document.getElementById("shareWrapper");if(o){var z=new MG_Modal({content:o,className:"shareItemContainer shareVideo"})}$(document).on("click","#shareModal",function(E){E.preventDefault();if(typeof z!=="undefined"){z.openModal()}$("#uiLayerShareTitle").text(varObj.videoTitle)});$(document).on("click",".addToList",function(){$(".addList").toggleClass("active");$(".createList").toggleClass("active")});$(".closeModal").on("click",function(){$(".triggerBtn").trigger("click");uiRemoveClass()});$(document).on("submit","#addToForm",$$.callbacks.doAddToPlaylist);$(document).on("submit","#createPlaylistForm",$$.callbacks.doCreatePlaylist);$(".showTags").on("click",function(){var E=$(this);if(E.data("scripts-loaded")!=1){$.getScript($(this).data("scripts"))}E.toggleClass("active").data("scripts-loaded",1);if(E.hasClass("active")){$(".targetContainer").removeClass("displayNone");$(".suggestionsAllWrap").removeClass("displayNone").addClass("displayNone")}else{$(".targetContainer").removeClass("displayNone").addClass("displayNone");$(".suggestionsAllWrap").addClass("displayNone")}});$("ul.tabs").each(function(){var E,F,G=$(this).find("a");E=$(G.filter('[href="'+location.hash+'"]')[0]||G[0]);E.addClass("active");F=$(E.attr("href"));G.not(E).each(function(){$($(this).attr("href")).hide()});$(this).on("click","a",function(H){E.removeClass("active");F.hide();E=$(this);F=$($(this).attr("href"));E.addClass("active");F.show();H.preventDefault()})});var C=$(".removeWhenPlaying"),h=$(".removeQualityWhenPlaying"),j=$(".player-html5"),i=$("#videoLinkPlaceholder"),q=$("#videoPlayerPlaceholder"),n=$(".player-html5"),s=navigator.userAgent,p=((s.indexOf("Mozilla/5.0")>-1&&s.indexOf("Android ")>-1&&s.indexOf("AppleWebKit")>-1)&&!(s.indexOf("Chrome")>-1));if((isAndroid&&androidVersion<3)||isFirefox()||!supportsVideo()||p||iosVersion()<7){q.remove();i.show();$(".removeWhenPlaying").show()}else{i.remove();q.show()}$(".currentQuality").click(function(){$(this).toggleClass("active");$("#qualityList").toggle()});j.on("playing",function(){C.hide()}).on("pause",function(){}).on("ended",function(){C.show();$(".imageWrapper").addClass("reflowVideoFix");j.hide();if(iosVersion()>=8){j.load()}$("#qualityList").hide()}).on("webkitendfullscreen",function(){C.show();$(".imageWrapper").addClass("reflowVideoFix");j.hide();$("#qualityList").hide()});j.on("canplay",function(){$("#videoStillLoading").fadeOut()});if(!$("#convertingImage").length){$(".playVideo").on("click",function(){var E=$("#qualityList").find(".streamQuality.active");C.hide();h.hide();$(".imageWrapper").removeClass("reflowVideoFix");$("#videoStillLoading").show();j.show();j.load();if(iosVersion()>=7||(isAndroid&&androidVersion>=4)){j[0].play()}})}var w=localStorage.getItem("activeVideoQuality"),x=$(".streamQuality"),y=$("#"+w),b=y.text();$("body").on("click",".streamQuality",function(){var F=$(this),E=F.data("quality");$("#qualityList").hide();if(!F.data("upgrade")){$(".currentQuality").removeClass("active");$(".currentQuality span").text(F.text());$("#qualityList li .streamQuality").removeClass("active");F.addClass("active");if(MG_Utils.storage.hasLocalStorage){localStorage.setItem("activeVideoQuality",F.attr("id"))}}if((isAndroid&&androidVersion<3)||isFirefox()||!supportsVideo()||p||iosVersion()<7){i.attr("href",E)}else{n.attr("src",E);j.load()}});if(y.length){y.addClass("active");$(".currentQuality span").text(y.text());i.attr("href",$(".streamQuality.default").data("quality"));n.attr("src",$(".streamQuality.active").data("quality"))}else{if(w===null&&!y.length||w!==null&&!y.length){if((isAndroid&&androidVersion<3)||isFirefox()||!supportsVideo()||p||iosVersion()<7){i.attr("href",$(".streamQuality.default").data("quality"))}else{n.attr("src",$(".streamQuality.default").data("quality"))}$(".currentQuality span").text($(".streamQuality.default").text())}}$("#moreRelated").on("click",function(){getRelatedVideos()});var e=document.getElementById("flagVideoModal");if(e){var c=new MG_Modal({content:e,className:"flagItemContainer flagVideo"})}$("#flagVideoBtn").on("click",function(E){E.preventDefault();if(typeof c!=="undefined"){c.openModal()}});$(document).on("click","#flagVideoSubmit",function(E){E.preventDefault();$.ajax({type:"POST",url:$(".flagCheckBox:checked").data("ajax-url"),data:{reason:$("#flagVideo").find("textarea").val()},success:function(){$("#flagVideo")[0].reset();$("body,html").animate({scrollTop:0},100);$("#flagVideo").html('<p class="success">Thank you for your input, your flag is being reviewed.</p>');setTimeout(function(){c.closeModal()},2000)},error:function(){$("#flagVideo").html('<p class="error">Sorry an error has occurred.</p>');setTimeout(function(){c.closeModal()},2000)}})})});function getRelatedVideos(){$.ajax({type:"GET",url:"/video/relateds?ajax=1&id="+varObj.videoId+"&page="+(++varObj.pageNumber),dataType:"html",success:function(a){$("#relatedVideos").append(a);if(varObj.pageNumber==4){$("#viewMoreWrap").hide()}}});return false}function showVrFallback(){document.getElementById("vrFallback").style.display="block"}(function(){var b=document.getElementById("vrTitle");if(!b){return}if(navigator.userAgent.match(/Windows Phone/i)){MG_Utils.addClass(document.getElementById("vrSection"),"disabled");return}function a(d){[].forEach.call(d,function(e){MG_Utils.addClass(e,"active")})}function c(){var d=this;MG_Utils.toggleClass(d,"active");MG_Utils.toggleClass(document.getElementById("vrWrap"),"active")}if(isAndroid&&androidVersion){a(document.querySelectorAll(".androidVr"));if(isGearVr()){a(document.querySelectorAll(".gearVr"))}}else{if(iosVersion()){a(document.querySelectorAll(".iosVr"))}}MG_Utils.addEventHandler(b,"click",c)})();var utmSource=document.referrer.split("/")[2];if(utmSource==""||(utmSource==undefined)){utmSource="www.pornhub.com"}function getKeys(c){var b=[],a;for(a in c){if(c.hasOwnProperty(a)){b.push(a)}}return b}var HMTL5Skin,nativePlayerHMTL5=document.getElementsByClassName("player-html5"),videoLinkPlaceholder=document.getElementById("videoLinkPlaceholder"),video=document.getElementById("videoLinkPlaceholder"),vrContainer=document.getElementById("vrContainer"),f;function mphLoadPlayer(){var e=getKeys(playerObjList),h=playerObjList[e[0]].flashvars.embedId,a=window["flashvars_"+h];if(typeof a!=="undefined"&&typeof window["playerDiv_"+h]!=="undefined"){var g,b=a.vcServerUrl||null,d=(premiumFlag==true);if(typeof isVr!=="undefined"&&isVr){g=(window["flashvars_"+playerObjList[e[0]].flashvars.embedId].display_hd_upsell==true&&!d)?["2160p"]:[]}else{g=(window["flashvars_"+playerObjList[e[0]].flashvars.embedId].display_hd_upsell==true)?[1080]:[]}if(!window["playerDiv_"+h].getAttribute("data-processed")){window["playerDiv_"+h].setAttribute("data-processed",1);var c=false;MHP1138.createPlayer("playerDiv_"+h,{autoplay:false,embeds:{enabled:false,logoEnabled:true,utmRedirect:{logo:true},redirect:{logoUrl:a.logo_url}},features:{logo:"true",menuDismissTimer:2.3,shareBar:false},seekParams:{flv:"fs",mp4:a.mp4_seek},referrerUrl:utmSource,menu:{relatedUrl:a.related_url,showOnPause:true},medias:{defaultQuality:a.defaultQuality,poster:a.image_url,sources:{480:a.quality_480p,240:a.quality_240p,720:a.quality_720p,1080:a.quality_1080p,1440:(typeof isVr!=="undefined"&&isVr)?a.quality_1440p:null,"2160p":(typeof isVr!=="undefined"&&isVr&&d)?a.quality_2160p:null},videoDuration:a.video_duration,videoTitle:a.video_title,videoUrl:a.link_url,qualityUpsell:g,thumbs:{urlPattern:a.thumbs.urlPattern,type:"normal",samplingFrequency:a.thumbs.samplingFrequency,thumbWidth:a.thumbs.thumbWidth,thumbHeight:a.thumbs.thumbHeight}},events:{onQualityUpsell:function(j,k){if(typeof isVr!=="undefined"&&isVr&&a.display_hd_upsell==true&&!d){triggerGatewayModal(k,a.skipGatewayModal,"Player2160pUpsell",phOrientationSegment)}else{if(a.display_hd_upsell==true){triggerGatewayModal(k,a.skipGatewayModal,"Player1080pUpsell",phOrientationSegment)}}MHP1138.exitFullscreen(j)},onReady:function(j){var k=MHP1138.choosenPlayer.playerName;if(k=="HTML5PlayerMobile"){HMTL5Skin=1}},onPlay:function(){setTimeout(function(){if(b===null){return}if(!c){c=true;var i=new XMLHttpRequest();i.open("GET",b);i.send()}},5000)},onVrError:function(){if(typeof showVrFallback==="function"){showVrFallback()}}},isVideoPage:(typeof isVideoPage!=="undefined")?true:false,vrProps:(typeof vrProps!=="undefined")?vrProps:"",isVr:(typeof isVr!=="undefined"&&isVr)?true:false})}}}function success(){if(MHP1138!==undefined){if(!HMTL5Skin){var a=document.getElementsByClassName("removeWhenPlaying");document.querySelector(".player-html5").style.display="none";for(f=0;f<a.length;f++){a[f].style.display="block"}}}}function isVisible(b){var a=window.getComputedStyle(b);return a.width!==0&&a.height!==0&&a.opacity!==0&&a.display!=="none"&&a.visibility!=="hidden"}function isready(){if(nativePlayerHMTL5.length>0||(videoLinkPlaceholder!=null&&isVisible(videoLinkPlaceholder))){return true}}function error(){if(!nativePlayerHMTL5){return false}}waitUntil(100,20);function waitUntil(b,a){if(b===undefined){b=100}if(a===undefined){a=20}if(isready()){success();return}setTimeout(function(){if(!b){if(error()!==undefined){error()}}else{waitUntil(b-1,a)}},a)}mphLoadPlayer();