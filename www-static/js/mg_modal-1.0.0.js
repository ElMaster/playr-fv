var MG_Modal=(function(){var h,b;function f(){var j={autoOpen:false,className:"generalMTubes",closeButton:true,closeDocument:true,closeKey:false,content:"",maxWidth:"",minWidth:"",overlay:true,position:"",pageScrolling:false,timeMs:null};this.closeButton=null;this.container=null;this.modal=null;this.options=MG_Utils.extendDefaults(j,arguments[0]);if(this.options.autoOpen){this.openModal()}}f.prototype={constructor:f,closeModal:function(k){h=false;MG_Utils.removeClass(document.body,"isOpenMTubes");if(this.container.parentNode){this.container.parentNode.removeChild(this.container)}if(this.options.timeMs){clearTimeout(b)}if(this.options.pageScrolling){var j=document.body;MG_Utils.removeClass(j,"scrollMTubes");j.style.height=""}if(k&&typeof k=="function"){k(this.container,this.modal)}},openModal:function(k){if(!h){g.call(this);e.call(this);MG_Utils.addClass(document.body,"isOpenMTubes");MG_Utils.addClassMultiple([this.modal,this.container],"elOpenMTubes");if(this.options.timeMs){var j=this;b=setTimeout(function(){j.closeModal()},this.options.timeMs)}if(k&&typeof k=="function"){k(this.container,this.modal)}c(this.options.content)}h=true}};function g(){var k,l=document.createElement("div"),j=document.createDocumentFragment();if(typeof this.options.content==="string"){k=this.options.content}else{k=this.options.content.innerHTML.replace(/MHP1138-/gi,"")}a.call(this);d.call(this);l.className="contentMTubes";l.innerHTML=k;this.modal.appendChild(l);this.container.appendChild(this.modal);i.call(this);j.appendChild(this.container);document.body.appendChild(j)}function a(){this.container=document.createElement("div");this.container.id="modalWrapMTubes";if(MG_Utils.isRbga){this.container.className=(!MG_Utils.isRbga()?"noRbga ":"")+"fadeInMTubes containerMTubes "+this.options.className}else{this.container.className="fadeInMTubes containerMTubes "+this.options.className}return this.container}function d(){this.modal=document.createElement("div");this.modal.className="modalMTubes "+this.options.className;this.modal.style.minWidth=this.options.minWidth;this.modal.style.maxWidth=this.options.maxWidth;return this.modal}function e(){var l=this;if(this.closeButton){var j=function(){l.closeModal();MG_Utils.removeEventHandler(l.closeButton,"click",j)};MG_Utils.addEventHandler(l.closeButton,"click",j)}if(this.container&&this.options.closeDocument){var m=function(n){if((n.target&&n.target.id||n.srcElement&&n.srcElement.id)==="modalWrapMTubes"){l.closeModal();MG_Utils.removeEventHandler(l.container,"click",m)}};MG_Utils.addEventHandler(l.container,"click",m)}if(this.container&&this.options.closeKey){var k=function(o){var n=o.keyCode?o.keyCode:o.charCode;if(o.keyCode==27){l.closeModal();MG_Utils.removeEventHandler(document,"keyup",k)}};MG_Utils.addEventHandler(document,"keyup",k)}}function i(){if(this.options.closeButton){this.closeButton=document.createElement("button");this.closeButton.className="closeMTubes buttonMTubes";this.modal.appendChild(this.closeButton)}if(this.options.overlay){MG_Utils.addClass(this.container,"isVisibleMTubes")}if(this.options.pageScrolling){var j=document.body;MG_Utils.addClassMultiple([this.container,j],"scrollMTubes");j.style.height=MG_Utils.docHeight()+"px"}if(this.options.position){this.modal.style.marginTop=this.options.position}}function c(l){if(typeof l==="string"){return}var k=0,n="MHP1138-",j=l.querySelectorAll("*"),m=j.length;for(k;k<m;k++){if(j[k].id&&!j[k].id.match(/MHP1138-/gi)){j[k].id=n+j[k].id}}}return f})();